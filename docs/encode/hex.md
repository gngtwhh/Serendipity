# Base64 编码/解码模块

这个模块提供了`十六进制字符串`与`字节串`之间的转换.

`十六进制`字符串应满足以下要求:

- 总长度为2的倍数,即每2个字符对应的十六进制数编码1个字节的数据.
- 每个字符应为合法的十六进制数.

caller应该在调用该模块的函数之前自行分配好内存(缓冲区)用于接收处理结果.

## 依赖

该模块依赖于`encode/encode_pre_init.h`.

# API参考

## hex_to_bytes

该函数用于将`十六进制字符串`转换为`字节串`.

函数原型:

```c
status hex_to_bytes(const char *hex, size_t in_len, byte *bytes, size_t *out_len);
```

- hex: 一个只读的C风格字符串,即待转换的十六进制字符串.
- in_len: 一个无符号整数,即期望处理的十六进制字符串的长度,该长度(应该)为2的倍数.
- bytes: 一个指针,指向一个缓冲区,用于存储转换的结果,即一个字节串.
- out_len: 一个指针,指向一个无符号整型变量,该变量用于接受成功转换的字节数.

注意:

- 函数会处理十六进制字符串的前`in_len`个字符,一直处理到第一个错误出现的位置之前,`*out_len`保存成功转换的字节数.
- caller应该确保`bytes`参数指向的缓冲区足够大,以容纳所有成功转换的字节,至多应该为`in_len`的一半.
- 由于结果是`字节串`,而非`字符串`,因此该函数不(应该)负责在转换结果后面添加`\0`结束符.
- 返回结果是一个整数,代表了函数的运行结果,`1`为全部成功转换,`0`为部分成功转换,`-1`为调用错误.

## bytes_to_hex

该函数用于将`字节串`转换为`十六进制字符串`.

函数原型:

```c
status bytes_to_hex(const byte *bytes, size_t in_len, char *hex, size_t *out_len);
```

- bytes: 一个指针,指向一个只读的待转换字节串.
- in_len: 一个无符号整数,即期望处理的字节串的长度.
- hex: 一个指针,指向一个缓冲区,用于存储转换的结果,即一个十六进制字符串.
- out_len: 一个指针,指向一个无符号整型变量,该变量用于接受转换后的十六进制字符串的长度.

注意:

- 函数会处理字节串的前`in_len`个字节,`*out_len`保存成功转换的十六进制字符串的长度.
- caller应该确保`hex`参数指向的缓冲区足够大,以容纳所有成功转换的字节,至多应该为`in_len`的二倍再加1.
- 由于结果是`字符串`,因此该函数会在转换结果后面添加一个`\0`结束符,hex指向的缓冲区需要避免该字节的溢出.
- 返回结果是一个整数,代表了函数的运行结果,`1`为全部成功转换,`-1`为调用错误.

